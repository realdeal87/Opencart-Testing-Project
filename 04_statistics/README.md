####Общая характеристика

Скрипт statistics.py (далее скрипт) служит для сбора статистики из файлов логов сервера apache или
nginx в формате Combined. После обработки файлов логов, статистика сохраняется в файле формата JSON.

Описание работы

После запуска скрипт сканирует директорию в поиске файлов с расширением log (директория задается
опцией командной строки, по умолчанию директория, в которой находится скрипт), затем файлы
подготавливаются для обработки (может быть выбран определенный файл, по умолчанию обрабатываются
все файлы в директории). Происходит поочередная обработка файлов на основе регулярных выражений. Из
строк формируются последовательности типа словарь, содержащие запросы с указанием количества
идентичных. Далее происходит сортировка последовательностей по убыванию и выборка 10 наибольших.
Итоговая статистика по запросам выводится в файл формата JSON с именем соответствующем имени
обрабатанного файла и расширением json. В статистике выводятся: общее количество обработанных
запросов, статистика по методам, 10 ip адресов с максимальным поступившим количеством запросов,
10 самых длинных запросов, 10 запросов завершившихся ошибкой клиента и 10 запросов завершившихся
ошибкой сервера. В случае, если количество сгрупированных запросов меньше 10, выводятся значения
null. 

####Запуск скрипта

    python3 statistics.py [параметры]

где параметры:

    --path, -p - абсолютный путь к файлам логов для парсинга. По умолчанию директория,
                 из которой запускается скрипт. Использовать: --path=<путь> 
     
    --file, -f - файл лога для обработки. По умолчанию, обрабатываются все файлы
                 с раширением log в директории. Использовать: --file=<файл>
    
    --lines, -l - количество обрабатываемых строк в файлах. По умолчанию все строки.
                  Использовать: --lines=<int>
                  
####Обработка ошибок

+ При попытке указания для обработки файла с расширением отличным от log возбуждается исключение
*TypeError: Обрабатываются только файлы с расширением .log*, скрипт останавливает работу.
+ При ошибки обработки строк файла или сортировке элементов, возбуждаются исключения *KeyError,
ValueError: Ошибка при обработке файла лога*, скрипт останавливает работу.

####Состав поставки

    access.json - статистика по оригинальному файлу логов opencart;
    access.log - оригинальный файл логов opencart в формате Combined;
    access_generated.json - статистика по сгенерированному файлу логов;
    access_generated.log - сгенерированный файл логов в формате Combined;
    log_generator.py - скрипт для генерации тестового файла логов;
    README.md - данное руководство;
    statistics.py - описываемый скрипт.